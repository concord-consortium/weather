<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Your interface name here-->
	<title>Weather station</title>
	<!-- The description of this interfaces here -->
	<meta name="description" content="">
	<link rel="stylesheet" type="text/css" href="mystyle.css">
	<!-- Your CSS here -->
</head>
<body>
	<p align=left style="font-size:150%;">Weather station<br><br>
	Cell: <select style="color:black;" id="row" onchange="newCell();">
		<option>A</option>
		<option>B</option>
		<option>C</option>
		<option>D</option>
		<option>E</option>
		<option>F</option>
		<option>G</option>
		<option>H</option>
		<option>I</option>
	</select>

	<select style="color:black;" id="column" onchange="newCell();">
		<option>1</option>
		<option>2</option>
		<option>3</option>
		<option>4</option>
		<option>5</option>
		<option>6</option>
		<option>7</option>
		<option>8</option>
		<option>9</option>
		<option>10</option>
		<option>11</option>
		<option>12</option>
	</select> <div style="color:yellow;font-size:120%;" id="timestamp"></div><br>
	<div style="color:yellow;font-size:80%;"> Embedded or portable. Location might be automatic. Could show histories.</div>
	<br><br>
	<div id="temp" style="font-size:1000%;"></div>
</p>
				

	<script src="nutella_lib.js" type="text/javascript"></script>
	<!-- Your scripts here -->
				
	<script type="text/javascript">
	
	// Parse the query parameters
	var query_parameters = NUTELLA.parseURLParameters();

	// Get an instance of nutella. 
	var nutella = NUTELLA.init(query_parameters.broker, query_parameters.app_id, query_parameters.run_id, NUTELLA.parseComponentId());
	
	// (Optional) Set the resourceId
	// nutella.setResourceId('my_resource_id');
	setInterval(function(){ nutella.net.publish('ping');}, 5 * 60 * 1000);
	setInterval(function(){ var d = new Date(); document.getElementById('timestamp').innerHTML = d.toUTCString();}, 1000);


	var map;
	var row = 0;
	var column = 0;
	nutella.net.subscribe('temp_update',function(msg,from){
		map=msg;
		document.getElementById('temp').innerHTML = map[row][column] + ' ºC';
	});

	function newCell() {
		row = document.getElementById('row').selectedIndex;
		column = document.getElementById('column').selectedIndex;
		document.getElementById('temp').innerHTML = map[row][column] + ' ºC';
	}

	
	</script>

				
</body>
</html>